plan_workflow_name: terraform-pull-request

tflint:
  enabled: true
  fix: true
trivy:
  enabled: true

target_groups:
  - working_directory: proxmox
    target: proxmox
    aws_region: ap-northeast-1
    secrets:
      - env_name: TF_VAR_root_pw
        secret_name: DEFAULT_ROOT_PW
    terraform_plan_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_raspberry-pi-cluster_terraform_plan
      secrets:
        - env_name: PM_API_TOKEN_ID
          secret_name: PM_API_TOKEN_ID
        - env_name: PM_API_TOKEN_SECRET
          secret_name: PM_API_TOKEN_SECRET
    terraform_apply_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_raspberry-pi-cluster_terraform_apply
      secrets:
        - env_name: PM_API_TOKEN_ID
          secret_name: PM_API_TOKEN_ID
        - env_name: PM_API_TOKEN_SECRET
          secret_name: PM_API_TOKEN_SECRET
